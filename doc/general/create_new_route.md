# Create a new scenario

**Summary:** This page shows how to create a new route with scenarios that can be loaded later as a checkpoint or used for an automated test.

## Scenario types

The carla simulator have different scenario types you can work with, which are listed down below. The corresponding python files could be found [here](https://github.com/carla-simulator/scenario_runner/tree/master/srunner/scenarios)

|                             Name |                                                                                                                                                                                                                                                                                                                                                                             Description                                                                                                                                                                                                                                                                                                                                                                             |
| -------------------------------: | :-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
|                       actor_flow |                                                                                                                                                                                                                                                                       This class holds everything required for a scenario in which another vehicle runs a red light in front of the ego, forcing it to react. This vehicles are 'special' ones such as police cars,ambulances or firetrucks.                                                                                                                                                                                                                                                                        |
|             blocked_intersection |                                                                                                                                                                                                                                                                                                         This class holds everything required for a scenario in which, the ego performs a turn only to find out that the end is blocked by another vehicle.                                                                                                                                                                                                                                                                                                          |
|                      change_lane |                                                                                                                                                                                                 This class holds everything required for a "change lane" scenario involving three vehicles. There are two vehicles driving in the same direction on the highway: A fast car and a slow car in front. The fast car will change the lane, when it is close to the slow car.The ego vehicle is driving right behind the fast car.This is a single ego vehicle scenario                                                                                                                                                                                                 |
|       construction_crash_vehicle |                                                                                                                                                                                                                                                 This class holds everything required for a construction scenario. The ego vehicle is passing through a road and encounters a stationary rectangular construction cones setup and traffic warning, forcing it to lane change. This is a single ego vehicle scenario                                                                                                                                                                                                                                                  |
|                    controll_loss |                                                                                                                                                                                                                                                                                                                                     Implementation of "Control Loss Vehicle" (Traffic Scenario 01) This is a single ego vehicle                                                                                                                                                                                                                                                                                                                                     |
|                           cut_in |                                                                                                                                                                                                                                                                                                                     The ego vehicle is driving on a highway and another car is cutting in just in front. This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                                                      |
|       cut_in_with_static_vehicle |                                                                                                                                                                                                                                                                                                        Cut in(with static vehicle) scenario synchronizes a vehicle that is parked at a side lane to cut in in front of the ego vehicle, forcing it to break                                                                                                                                                                                                                                                                                                         |
|           follow_leading_vehicle |                                                                                                                                                                                                                                                                                              This class holds everything required for a simple "Follow a leading vehicle" scenario involving two vehicles. (Traffic Scenario 2) This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                               |
|                       hard_break |                                                                                                                                                                                                                                                                                                                   This class uses the is the Background Activity at routes to create a hard break scenario. This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                                                   |
|                    invading_turn |                                                                                                                                                                                                                      This class holds everything required for a scenario in which the ego is about to turn right when a vehicle coming from the opposite lane invades the ego's lane, forcing the ego to move right to avoid a possible collision. This scenario is expected to take place on a road that has only one lane in each direction.                                                                                                                                                                                                                      |
|      maneuver_opposite_direction |                                                                                                                                                                                                                                                                                                                               "Vehicle Maneuvering In Opposite Direction" (Traffic Scenario 06) This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                                                               |
|      no_signal_junction_crossing |                                                                                                                                                                                                                                                                                                          Implementation class for 'Non-signalized junctions: crossing negotiation' scenario, (Traffic Scenario 10). This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                                           |
|        object_crash_intersection |                                                                                                                                                                                                                                                                                                          Implementation class for 'Non-signalized junctions: crossing negotiation' scenario, (Traffic Scenario 10). This is a single ego vehicle scenario                                                                                                                                                                                                                                                                                                           |
| opposite_vehicle_taking_priority |                                                                                                                                                                                                                                                                                                                     Scenario in which another vehicle enters the junction a tthe same time as the ego, forcing it to break to avoid a collision                                                                                                                                                                                                                                                                                                                     |
|                   parking_cut_in |                                                                                                                                                                                                                                                                                                               Parking cut in scenario synchronizes a vehicle that is parked at a side lane to cut in in front of the ego vehicle, forcing it to break                                                                                                                                                                                                                                                                                                               |
|parking_exit | This class holds everything required for a scenario in which the ego would be teleported to the parking lane. Once the scenario is triggered, the OutsideRouteLanesTest will be deactivated since the ego is out of the driving lane. Then blocking vehicles will be generated in front of and behind the parking point. The ego need to exit from the parking lane and then merge into the driving lane. After the ego is {end_distance} meters away from the parking point, the OutsideRouteLanesTest will be activated and the scenario ends. Note 1: For route mode, this shall be the first scenario of the route. The trigger point shall be the first point of the route waypoints. Note 2: Make sure there are enough space for spawning blocking vehicles. |
|              pedestrian_crossing |This class holds everything required for a group of natual pedestrians crossing the road. The ego vehicle is passing through a road, and encounters a group of pedestrians crossing the road.This is a single ego vehicle scenario. Notice that the initial pedestrian will walk from the start of the junction ahead to end_walker_flow_1.|
|route_obstacles |This class holds everything required for a scenario in which there is an accident in front of the ego, forcing it to lane change. A police vehicle is located before two other cars that have been in an accident.                                                                                                                                                                                                                                                                          |vehicle_opens_door |This class holds everything required for a scenario in which another vehicle parked at the side lane opens the door, forcing the ego to lane change, invading the opposite lane|

## Create new route

For creating a new route take this blueprint of a route:

```xml
<routes>
    <route id="0" town="Town12">
        <weathers>
            <weather route_percentage="0"
                cloudiness="5.0" precipitation="0.0" precipitation_deposits="0.0" wetness="0.0"
                wind_intensity="10.0" sun_azimuth_angle="-1.0" sun_altitude_angle="90.0" fog_density="2.0"/>
            <weather route_percentage="100"
                cloudiness="5.0" precipitation="0.0" precipitation_deposits="0.0" wetness="0.0"
                wind_intensity="10.0" sun_azimuth_angle="-1.0" sun_altitude_angle="15.0" fog_density="2.0"/>
        </weathers>
        <waypoints>
            <position x="780.7" y="5574.7" z="369"/>
            <position x="159.5" y="5573.9" z="369.5"/>
            <position x="-204.7" y="5286.5" z="370"/>
        </waypoints>
        <scenarios>
            <scenario name="HazardAtSideLane_2" type="HazardAtSideLane">
                <trigger_point x="778.7" y="5574.7" z="369" yaw="179.9"/>
                <distance value="50"/>
                <bicycle_drive_distance value="80"/>
                <bicycle_speed value="8"/>
            </scenario>
            </scenarios>
    </route>
</routes>
```

This example is from [routes_bicycle.xml](/code/routes/routes_bicycle.xml)

To change it for your purpose you have to change the following:

1. The id number at line 2
2. The waypoints (they discribe where the agent have to go the first one is the spawnpoint of the agent) Tipp: place always only one waypoint at one road and place it on the right side of the road. To find the coordinates use this interactive [map](https://carla.readthedocs.io/en/latest/map_town12/)
3. The scenario (You can change the scenario with one mentioned in the list) If the route is long enough you can add more than one scenario to a route.
